<% title = 'Finalización del examen' %>
<%- include('../partials/layoutsAdmin.ejs'); %>

<body>
    <div class="wrapper">
        <%- include('../partials/sidebarUser.ejs'); %> 

        <div id="main-content" class="main p-3">
            <%- include('../partials/header.ejs'); %>

            <div class="text-center mt-4 mb-4">
                <h3 class="titulo-dashboard">¡Examen Finalizado!</h3>
                <p class="fs-6">Tu puntaje final es: <strong><%= simulation.puntaje_total %></strong></p>
                
                <div class="fondo-dashboard">
                    <table class="table table-striped">
                        <thead class="table-light">
                            <tr>
                                <th>Curso</th>
                                <th>Nro preguntas</th>
                                <th>Nro de rptas correctas</th>
                                <th>Nro de rptas incorrectas</th>
                                <th>Puntaje</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% dataForView.forEach((materia) => { %>
                                <tr>
                                    <td><%= materia.nombreMateria %></td>
                                    <td><%= materia.preguntas %></td>
                                    <td><%= materia.correctas %></td>
                                    <td><%= materia.incorrectas %></td>
                                    <td><%= materia.puntaje %></td>
                                </tr>
                            <% }); %>
                        </tbody>
                        <tfoot>
                            <tr class="table-secondary">
                                <td>Total</td>
                                <td><%= dataForView.reduce((acc, item) => acc + item.preguntas, 0) %></td>
                                <td><%= dataForView.reduce((acc, item) => acc + item.correctas, 0) %></td>
                                <td><%= dataForView.reduce((acc, item) => acc + item.incorrectas, 0) %></td>
                                <td><%= dataForView.reduce((acc, item) => acc + item.puntaje, 0) %></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>

                <div class="mb-4">
                    <a href="/userRespuestas/<%= simulation.id_simulation %>" class="btn2">Ver respuestas correctas</a>
                    <br><br>
                    <a href="/userDashboard" class="btn1">Volver</a><br><br>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="/js/index.js"></script>
    <script type="module" src="/js/genericFunctions.js"></script>
    <script src="/js/user.js"></script>
    
    
    </body>
